<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Phoenix</title>

    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicons/favicon.ico">
    <link rel="manifest" href="img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">
    <script th:src="@{/admin/vendors/simplebar/simplebar.min.js}"></script>
    <script th:src="@{/admin/js/config.js}"></script>

    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="/admin/css2.css" type="text/html" rel="stylesheet">
    <link th:src="@{/admin/vendors/simplebar/simplebar.min.css}" rel="stylesheet">
    <link rel="stylesheet" href="/admin/release/v4.0.8/css/line.css">
    <link th:href="@{/admin/css/theme-rtl.min.css}" type="text/css" rel="stylesheet" id="style-rtl">
    <link th:href="@{/admin/css/theme.min.css}" type="text/css" rel="stylesheet" id="style-default">
    <link th:href="@{/admin/css/user-rtl.min.css}" type="text/css" rel="stylesheet" id="user-style-rtl">
    <link th:href="@{/admin/css/user.min.css}" type="text/css" rel="stylesheet" id="user-style-default">
    <script>
        var phoenixIsRTL = window.config.config.phoenixIsRTL;
        if (phoenixIsRTL) {
          var linkDefault = document.getElementById('style-default');
          var userLinkDefault = document.getElementById('user-style-default');
          linkDefault.setAttribute('disabled', true);
          userLinkDefault.setAttribute('disabled', true);
          document.querySelector('html').setAttribute('dir', 'rtl');
        } else {
          var linkRTL = document.getElementById('style-rtl');
          var userLinkRTL = document.getElementById('user-style-rtl');
          linkRTL.setAttribute('disabled', true);
          userLinkRTL.setAttribute('disabled', true);
        }
    </script>
    <link th:src="@{/admin/vendors/leaflet/leaflet.css}" rel="stylesheet">
    <link th:src="@{/admin/vendors/leaflet.markercluster/MarkerCluster.css}" rel="stylesheet">
    <link th:src="@{/admin/vendors/leaflet.markercluster/MarkerCluster.Default.css}" rel="stylesheet">
</head>
<body>
<main class="main" id="top">
    <div th:replace="~{admin/__fragments/menu.html :: menu}"></div>
    <div th:replace="~{admin/__fragments/header.html :: header}"></div>
    <div class="content">
        <div class="pb-5">
            <div class="row g-4">
                <h2 class="text-center">Used Sales List</h2>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                    <tr>
                        <th>
                            Sale Name
                            <button class="btn btn-light btn-sm" onclick="sortTable(0, 'asc')">▲</button>
                            <button class="btn btn-light btn-sm" onclick="sortTable(0, 'desc')">▼</button>
                        </th>
                        <th>
                            Sale Condition
                            <button class="btn btn-light btn-sm" onclick="sortTable(1, 'asc')">▲</button>
                            <button class="btn btn-light btn-sm" onclick="sortTable(1, 'desc')">▼</button>
                        </th>
                        <th>
                            Object Name
                            <button class="btn btn-light btn-sm" onclick="sortTable(2, 'asc')">▲</button>
                            <button class="btn btn-light btn-sm" onclick="sortTable(2, 'desc')">▼</button>
                        </th>
                        <th>
                            Created At
                            <button class="btn btn-light btn-sm" onclick="sortTable(3, 'asc')">▲</button>
                            <button class="btn btn-light btn-sm" onclick="sortTable(3, 'desc')">▼</button>
                        </th>
                    </tr>
                    </thead>
                    <tbody id="usedSalesTableBody">
                    <tr th:each="usedSales : ${usedSalesLists}">
                        <td th:text="${usedSales.sale.name}" class="p-2"></td>
                        <td th:text="${usedSales.sale.saleCondition.objectName + ' - ' + usedSales.sale.saleCondition.saleRule + ' - ' + usedSales.sale.saleCondition.minPrice}"></td>
                        <td th:text="${objectNamesMap[usedSales.idOfTheObject]}"></td>
                        <td th:text="${#dates.format(usedSales.createdAt, 'dd-MM-yyyy HH:mm:ss')}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

<script th:src="@{/admin/vendors/popper/popper.min.js}"></script>
<script th:src="@{/admin/vendors/bootstrap/bootstrap.min.js}"></script>
<script th:src="@{/admin/vendors/anchorjs/anchor.min.js}"></script>
<script th:src="@{/admin/vendors/is/is.min.js}"></script>
<script th:src="@{/admin/vendors/fontawesome/all.min.js}"></script>
<script th:src="@{/admin/vendors/lodash/lodash.min.js}"></script>
<script src="/admin/v3/polyfill.min.js?features=window.scroll"></script>
<script th:src="@{/admin/vendors/list.js/list.min.js}"></script>
<script th:src="@{/admin/vendors/feather-icons/feather.min.js}"></script>
<script th:src="@{/admin/vendors/dayjs/dayjs.min.js}"></script>
<script th:src="@{/admin/vendors/leaflet/leaflet.js}"></script>
<script th:src="@{/admin/vendors/leaflet.markercluster/leaflet.markercluster.js}"></script>
<script th:src="@{/admin/vendors/leaflet.tilelayer.colorfilter/leaflet-tilelayer-colorfilter.min.js}"></script>
<script th:src="@{/admin/js/phoenix.js}"></script>
<script th:src="@{/admin/vendors/echarts/echarts.min.js}"></script>
<script th:src="@{/admin/js/ecommerce-dashboard.js}"></script>
<script>
    function sortTable(columnIndex, order) {
        var tableBody = document.getElementById('usedSalesTableBody');
        var rows = Array.from(tableBody.rows);

        rows.sort(function (a, b) {
            var aText = a.cells[columnIndex].innerText.toLowerCase();
            var bText = b.cells[columnIndex].innerText.toLowerCase();

            if (columnIndex === 3) { // Sort by date for Created At column
                aText = new Date(aText);
                bText = new Date(bText);
            }

            if (order === 'asc') {
                return aText > bText ? 1 : -1;
            } else {
                return aText < bText ? 1 : -1;
            }
        });

        rows.forEach(function (row) {
            tableBody.appendChild(row);
        });
    }
</script>
</body>
</html>
